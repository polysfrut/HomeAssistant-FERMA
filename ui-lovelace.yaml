# ======================================================================
# LOVELACE DASHBOARD: –ë—Ä—É–¥–µ—Ä
# ======================================================================
# Dashboard –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±—Ä—É–¥–µ—Ä–æ–º –ø–µ—Ä–µ–ø–µ–ª–∏–Ω–æ–π —Ñ–µ—Ä–º—ã
# ======================================================================

title: –ë—Ä—É–¥–µ—Ä
views:
  - title: –ë—Ä—É–¥–µ—Ä 2
    path: brooder-2
    icon: mdi:home-thermometer
    cards:
      # -------------------------------------------------
      # 1. –£–ü–†–ê–í–õ–ï–ù–ò–ï
      # -------------------------------------------------
      - type: entities
        title: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
        entities:
          # –¢–µ–∫—É—â–∏–µ –ø–æ–∫–∞–∑–∞–Ω–∏—è –¥–∞—Ç—á–∏–∫–æ–≤
          - entity: sensor.waveshare001_rs485_temperature_11
            name: –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞
            icon: mdi:thermometer
          - entity: sensor.waveshare001_rs485_humidity_11
            name: –í–ª–∞–∂–Ω–æ—Å—Ç—å
            icon: mdi:water-percent
          
          # –†–µ–≥—É–ª–∏—Ä–æ–≤–∫–∞ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã
          - entity: input_number.min_temp
            name: –ú–∏–Ω. —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞
            icon: mdi:thermometer-low
          - entity: input_number.max_temp
            name: –ú–∞–∫—Å. —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞
            icon: mdi:thermometer-high
          
          # –†–µ–≥—É–ª–∏—Ä–æ–≤–∫–∞ –≤–ª–∞–∂–Ω–æ—Å—Ç–∏
          - entity: input_number.min_hum
            name: –ú–∏–Ω. –≤–ª–∞–∂–Ω–æ—Å—Ç—å
            icon: mdi:water-percent
          - entity: input_number.max_hum
            name: –ú–∞–∫—Å. –≤–ª–∞–∂–Ω–æ—Å—Ç—å
            icon: mdi:water-percent

      # -------------------------------------------------
      # 2. –ë–õ–û–ö "–ê–í–ê–†–ò–ô–ù–´–ô –†–ï–ñ–ò–ú"
      # -------------------------------------------------
      - type: custom:mushroom-title-card
        title: –ê–≤–∞—Ä–∏–π–Ω—ã–π —Ä–µ–∂–∏–º
        subtitle: >
          {% if is_state('input_boolean.emergency_active', 'on') %}
            üö® –ê–í–ê–†–ò–Ø! –°–∏—Å—Ç–µ–º–∞ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞
          {% else %}
            ‚úÖ –°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ
          {% endif %}

      - type: vertical-stack
        cards:
          - type: custom:mushroom-template-card
            primary: >
              {% if is_state('input_boolean.emergency_active', 'on') %}
                üö® –ê–≤–∞—Ä–∏–π–Ω—ã–π —Ä–µ–∂–∏–º –ê–ö–¢–ò–í–ï–ù
              {% else %}
                ‚úÖ –ê–≤–∞—Ä–∏–π–Ω—ã–π —Ä–µ–∂–∏–º –Ω–µ–∞–∫—Ç–∏–≤–µ–Ω
              {% endif %}
            secondary: >
              {% if is_state('input_boolean.emergency_active', 'on') %}
                –°–∏—Å—Ç–µ–º–∞ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞. –¢—Ä–µ–±—É–µ—Ç—Å—è —Å–±—Ä–æ—Å –∞–≤–∞—Ä–∏–∏.
              {% else %}
                –°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ
              {% endif %}
            icon: mdi:alert
            icon_color: >
              {% if is_state('input_boolean.emergency_active', 'on') %}
                red
              {% else %}
                green
              {% endif %}
          
          - type: custom:mushroom-template-card
            primary: –°–æ—Å—Ç–æ—è–Ω–∏–µ –±—Ä—É–¥–µ—Ä–∞
            secondary: "{{ states('input_text.brooder_state') }}"
            icon: >
              {% if is_state('input_text.brooder_state', '–ê–í–ê–†–ò–Ø') %}
                mdi:alert-octagon
              {% elif is_state('input_text.brooder_state', '–ü–æ–¥–æ–≥—Ä–µ–≤') %}
                mdi:heat-wave
              {% elif is_state('input_text.brooder_state', '–û—Å–≤–µ—â–µ–Ω–∏–µ') %}
                mdi:lightbulb-on
              {% elif is_state('input_text.brooder_state', '–ü—Ä–æ–≤–µ—Ç—Ä–∏–≤–∞–Ω–∏–µ') %}
                mdi:fan
              {% elif is_state('input_text.brooder_state', '–û–∂–∏–¥–∞–Ω–∏–µ') %}
                mdi:pause-circle
              {% else %}
                mdi:information-outline
              {% endif %}
            icon_color: >
              {% if is_state('input_text.brooder_state', '–ê–í–ê–†–ò–Ø') %}
                red
              {% elif is_state('input_text.brooder_state', '–ü–æ–¥–æ–≥—Ä–µ–≤') %}
                orange
              {% elif is_state('input_text.brooder_state', '–û—Å–≤–µ—â–µ–Ω–∏–µ') %}
                yellow
              {% elif is_state('input_text.brooder_state', '–ü—Ä–æ–≤–µ—Ç—Ä–∏–≤–∞–Ω–∏–µ') %}
                cyan
              {% elif is_state('input_text.brooder_state', '–û–∂–∏–¥–∞–Ω–∏–µ') %}
                grey
              {% else %}
                blue
              {% endif %}
          
          - type: custom:mushroom-template-card
            primary: –ü—Ä–∏—á–∏–Ω–∞ –∞–≤–∞—Ä–∏–∏
            secondary: >
              {% if states('input_text.emergency_reason') != '' %}
                {{ states('input_text.emergency_reason') }}
              {% else %}
                –ù–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ–π –∞–≤–∞—Ä–∏–∏
              {% endif %}
            icon: mdi:alert-octagon
            icon_color: >
              {% if states('input_text.emergency_reason') != '' %}
                red
              {% else %}
                grey
              {% endif %}
          
          - type: custom:mushroom-entity-card
            entity: input_button.reset_emergency
            name: –°–±—Ä–æ—Å –∞–≤–∞—Ä–∏–∏
            icon: mdi:restore-alert
            icon_color: >
              {% if is_state('input_boolean.emergency_active', 'on') %}
                orange
              {% else %}
                grey
              {% endif %}
            tap_action:
              action: button

      # -------------------------------------------------
      # 3. –ë–õ–û–ö "–ü–†–û–ì–†–ï–í"
      # -------------------------------------------------
      - type: custom:mushroom-title-card
        title: –ü—Ä–æ–≥—Ä–µ–≤
        subtitle: –í–∫–ª—é—á–µ–Ω–∏–µ –≤—Å–µ—Ö –ò–ö –ª–∞–º–ø –∏ –≤—Å–µ—Ö –¢–≠–ù–æ–≤

      - type: entities
        entities:
          - entity: input_boolean.ruchnoi_rezhim
            name: –†—É—á–Ω–æ–π —Ä–µ–∂–∏–º
            icon: mdi:hand-back-left
          - entity: input_button.preheat
            name: –ü—Ä–æ–≥—Ä–µ–≤
            icon: mdi:heat-wave
            tap_action:
              action: button
          - entity: input_button.stop_brooder
            name: –°—Ç–æ–ø
            icon: mdi:stop-circle
            tap_action:
              action: button

      # -------------------------------------------------
      # 4. –£–ü–†–ê–í–õ–ï–ù–ò–ï –†–ï–õ–ï (–í–´–•–û–î–´)
      # -------------------------------------------------
      - type: custom:mushroom-title-card
        title: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–ª–µ

      - type: entities
        entities:
          - entity: switch.waveshare001_relay_1
            name: –¢–≠–ù1
          - entity: switch.waveshare001_relay_2
            name: –¢–≠–ù2
          - entity: switch.waveshare001_relay_3
            name: –í–µ–Ω—Ç–∏–ª—è—Ç–æ—Ä —Å–∫–æ—Ä.1
          - entity: switch.waveshare001_relay_4
            name: –í–µ–Ω—Ç–∏–ª—è—Ç–æ—Ä —Å–∫–æ—Ä.2
          - entity: switch.waveshare001_relay_5
            name: –ò–ö 1-2
          - entity: switch.waveshare001_relay_6
            name: –ò–ö 3-4
          - entity: switch.waveshare001_relay_7
            name: –ò–ö 5-6
          - entity: switch.waveshare001_relay_8
            name: –û—Å–≤–µ—â–µ–Ω–∏–µ

      # -------------------------------------------------
      # 5. –ì–†–ê–§–ò–ö–ò (–∏—Å—Ç–æ—Ä–∏—è)
      # -------------------------------------------------
      - type: custom:mushroom-title-card
        title: –ò—Å—Ç–æ—Ä–∏—è (24 —á–∞—Å–∞)

      - type: history-graph
        entities:
          - entity: sensor.waveshare001_rs485_temperature_11
            name: –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞
          - entity: sensor.waveshare001_rs485_humidity_11
            name: –í–ª–∞–∂–Ω–æ—Å—Ç—å
        hours_to_show: 24
        refresh_interval: 60

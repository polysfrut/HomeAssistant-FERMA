# ----------------------------------------------------------------------
# –ü—Ä–æ–µ–∫—Ç: –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –ø–µ—Ä–µ–ø–µ–ª–∏–Ω–æ–π —Ñ–µ—Ä–º—ã (–±—Ä—É–¥–µ—Ä) –Ω–∞ Home Assistant
# –ü—Ä–æ—Ç–æ–∫–æ–ª: Modbus RTU (RS485) + WaveShare —Ä–µ–ª–µ/–¥–∞—Ç—á–∏–∫–∏
# –ê–≤—Ç–æ—Ä: dmk2025 (xAI) ‚Äì —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∞–ª–≥–æ—Ä–∏—Ç–º–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
# ----------------------------------------------------------------------
# 1. –í–•–û–î–ù–´–ï –ü–ê–†–ê–ú–ï–¢–†–´ (input_number) ‚Äì –º–µ–Ω—è—é—Ç—Å—è –≤ UI
# 2. –ö–ù–û–ü–ö–ò (input_button)
# 3. –°–¢–ê–¢–£–°–´ (input_text + sensor)
# 4. –ê–í–¢–û–ú–ê–¢–ò–ó–ê–¶–ò–ò (automation) ‚Äì –≤–µ—Å—å –∞–ª–≥–æ—Ä–∏—Ç–º
# ----------------------------------------------------------------------
# –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:
#   ‚Ä¢ modbus: —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω (hub "waveshare001")
#   ‚Ä¢ notify: –ª—é–±–æ–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, mobile_app –∏–ª–∏ telegram)
#   ‚Ä¢ shell_command: –Ω–µ—Ç
# ----------------------------------------------------------------------
# ----------------------------------------------------------------------
# –î–û–ü–û–õ–ù–ï–ù–ò–ï: –õ–æ–≥–∏–∫–∞ –ê–í–ê–†–ò–ô–ù–û–ì–û –û–°–¢–ê–ù–û–í–ê
# –î–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π configuration.yaml (–∏–ª–∏ package)
# ----------------------------------------------------------------------
# –ß—Ç–æ —Å—á–∏—Ç–∞–µ—Ç—Å—è "–∞–≤–∞—Ä–∏–µ–π":
# 1. –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ > –ú–∞–∫—Å –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –±—Ä—É–¥–µ—Ä–∞ + 3¬∞C (–ø–µ—Ä–µ–≥—Ä–µ–≤)
# 2. –í–ª–∞–∂–Ω–æ—Å—Ç—å > –ú–∞–∫—Å –≤–ª–∞–∂–Ω–æ—Å—Ç—å –±—Ä—É–¥–µ—Ä–∞ + 10% (–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –≤–ª–∞–∂–Ω–æ—Å—Ç—å)
# 3. –î–∞—Ç—á–∏–∫–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã > 5 –º–∏–Ω—É—Ç (unavailable)
# 4. –ê–≤–∞—Ä–∏–π–Ω–∞—è –∫–Ω–æ–ø–∫–∞ (—É–∂–µ –µ—Å—Ç—å: binary_sensor.waveshare001_di8)
#
# –ü—Ä–∏ –∞–≤–∞—Ä–∏–∏:
#   ‚Ä¢ –ù–µ–º–µ–¥–ª–µ–Ω–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –í–°–ï–ì–û –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è
#   ‚Ä¢ –°–æ—Å—Ç–æ—è–Ω–∏–µ –±—Ä—É–¥–µ—Ä–∞ ‚Üí "–ê–í–ê–†–ò–Ø"
#   ‚Ä¢ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Å –ø—Ä–∏—á–∏–Ω–æ–π
#   ‚Ä¢ –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∑–∞–ø—É—Å–∫–∞ –¥–æ —Ä—É—á–Ω–æ–≥–æ —Å–±—Ä–æ—Å–∞ (–∫–Ω–æ–ø–∫–∞ "–°–±—Ä–æ—Å –∞–≤–∞—Ä–∏–∏")
# ----------------------------------------------------------------------


# ======================================================================
# 1. INPUT_NUMBER ‚Äì –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (UI)
# ======================================================================
input_number:
  ir_time_56:                     # "–í—Ä–µ–º—è –ò–ö –ª–∞–º–ø—ã 5-6" (–¥–Ω–µ–π)
    name: –í—Ä–µ–º—è –ò–ö –ª–∞–º–ø—ã 5-6
    min: 1
    max: 10
    initial: 7
    step: 1
    unit_of_measurement: –¥–Ω–µ–π
    icon: mdi:timer

  ir_time_34:                     # "–í—Ä–µ–º—è –ò–ö –ª–∞–º–ø—ã 3-4" (–¥–Ω–µ–π)
    name: –í—Ä–µ–º—è –ò–ö –ª–∞–º–ø—ã 3-4
    min: 1
    max: 10
    initial: 2
    step: 1
    unit_of_measurement: –¥–Ω–µ–π
    icon: mdi:timer

  ir_time_12:                     # "–í—Ä–µ–º—è –ò–ö –ª–∞–º–ø—ã 1-2" (–¥–Ω–µ–π)
    name: –í—Ä–µ–º—è –ò–ö –ª–∞–º–ø—ã 1-2
    min: 1
    max: 10
    initial: 1
    step: 1
    unit_of_measurement: –¥–Ω–µ–π
    icon: mdi:timer

  work_cycle:                     # "–†–∞–±–æ—á–∏–π —Ü–∏–∫–ª" (–¥–Ω–µ–π)
    name: –†–∞–±–æ—á–∏–π —Ü–∏–∫–ª
    min: 1
    max: 15
    initial: 14
    step: 1
    unit_of_measurement: –¥–Ω–µ–π
    icon: mdi:calendar-clock

  min_temp:                       # "–ú–∏–Ω –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –±—Ä—É–¥–µ—Ä–∞"
    name: –ú–∏–Ω –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –±—Ä—É–¥–µ—Ä–∞
    min: 20
    max: 40
    initial: 30
    step: 0.5
    unit_of_measurement: ¬∞C
    icon: mdi:thermometer-low

  max_temp:                       # "–ú–∞–∫—Å –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –±—Ä—É–¥–µ—Ä–∞"
    name: –ú–∞–∫—Å –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –±—Ä—É–¥–µ—Ä–∞
    min: 20
    max: 40
    initial: 37
    step: 0.5
    unit_of_measurement: ¬∞C
    icon: mdi:thermometer-high

  min_hum:                        # "–ú–∏–Ω –≤–ª–∞–∂–Ω–æ—Å—Ç—å –±—Ä—É–¥–µ—Ä–∞"
    name: –ú–∏–Ω –≤–ª–∞–∂–Ω–æ—Å—Ç—å –±—Ä—É–¥–µ—Ä–∞
    min: 40
    max: 70
    initial: 60
    step: 1
    unit_of_measurement: '%'
    icon: mdi:water-percent

  max_hum:                        # "–ú–∞–∫—Å –≤–ª–∞–∂–Ω–æ—Å—Ç—å –±—Ä—É–¥–µ—Ä–∞"
    name: –ú–∞–∫—Å –≤–ª–∞–∂–Ω–æ—Å—Ç—å –±—Ä—É–¥–µ—Ä–∞
    min: 40
    max: 70
    initial: 65
    step: 1
    unit_of_measurement: '%'
    icon: mdi:water-percent


# ======================================================================
# 2. INPUT_BUTTON ‚Äì –ø—Ä–æ–≥—Ä–∞–º–º–Ω—ã–µ –∫–Ω–æ–ø–∫–∏
# ======================================================================
input_button:
  start_brooder:                  # "–ó–∞–ø—É—Å—Ç–∏—Ç—å –±—Ä—É–¥–µ—Ä"
    name: –ó–∞–ø—É—Å—Ç–∏—Ç—å –±—Ä—É–¥–µ—Ä
    icon: mdi:play-circle

  preheat:                        # "–ü—Ä–æ–≥—Ä–µ–≤"
    name: –ü—Ä–æ–≥—Ä–µ–≤
    icon: mdi:heat-wave

  lighting:                       # "–û—Å–≤–µ—â–µ–Ω–∏–µ"
    name: –û—Å–≤–µ—â–µ–Ω–∏–µ
    icon: mdi:lightbulb-on

  ir_lamps:                       # "–ò–ö –ª–∞–º–ø—ã"
    name: –ò–ö –ª–∞–º–ø—ã
    icon: mdi:lightbulb-outline

  stop_brooder:                   # "–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±—Ä—É–¥–µ—Ä"
    name: –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±—Ä—É–¥–µ—Ä
    icon: mdi:stop-circle

# –ö–Ω–æ–ø–∫–∞ —Å–±—Ä–æ—Å–∞ –∞–≤–∞—Ä–∏–∏ (–ø—Ä–æ–≥—Ä–∞–º–º–Ω–∞—è)
  reset_emergency:
    name: –°–±—Ä–æ—Å –∞–≤–∞—Ä–∏–∏
    icon: mdi:restore-alert

# –°—Ç–∞—Ç—É—Å –∞–≤–∞—Ä–∏–∏ (–¥–ª—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏)
input_boolean:
  emergency_active:
    name: –ê–≤–∞—Ä–∏–π–Ω—ã–π —Ä–µ–∂–∏–º –∞–∫—Ç–∏–≤–µ–Ω
    initial: off
    icon: mdi:alert

  ruchnoi_rezhim:
    name: –†—É—á–Ω–æ–π —Ä–µ–∂–∏–º
    initial: off
    icon: mdi:hand-back-left

# ======================================================================
# 3. INPUT_TEXT / INPUT_DATETIME ‚Äì —Å—Ç–∞—Ç—É—Å—ã –∏ —Ç–∞–π–º–µ—Ä—ã
# ======================================================================
input_text:
  brooder_state:                  # "–°–æ—Å—Ç–æ—è–Ω–∏–µ –±—Ä—É–¥–µ—Ä–∞"
    name: –°–æ—Å—Ç–æ—è–Ω–∏–µ –±—Ä—É–¥–µ—Ä–∞
    initial: –û–∂–∏–¥–∞–Ω–∏–µ
    icon: mdi:information-outline

input_datetime:
  init_time:                      # –î–∞—Ç–∞/–≤—Ä–µ–º—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ "–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è"
    name: –í—Ä–µ–º—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
    has_date: true
    has_time: true

  ir_on_time:                     # –î–∞—Ç–∞/–≤—Ä–µ–º—è –≤–∫–ª—é—á–µ–Ω–∏—è –ò–ö –ª–∞–º–ø
    name: –ò–ö –ª–∞–º–ø—ã –≤–∫–ª—é—á–µ–Ω—ã
    has_date: true
    has_time: true

  ir_off_56:                      # –ü–ª–∞–Ω–æ–≤–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –ò–ö 5-6
    name: –û—Ç–∫–ª. –ò–ö 5-6
    has_date: true
    has_time: true

  ir_off_34:                      # –ü–ª–∞–Ω–æ–≤–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –ò–ö 3-4
    name: –û—Ç–∫–ª. –ò–ö 3-4
    has_date: true
    has_time: true

  ir_off_12:                      # –ü–ª–∞–Ω–æ–≤–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –ò–ö 1-2
    name: –û—Ç–∫–ª. –ò–ö 1-2
    has_date: true
    has_time: true

  lighting_start:                 # "–û—Å–≤–µ—â–µ–Ω–∏–µ –≤–∫–ª—é—á–µ–Ω–æ"
    name: –û—Å–≤–µ—â–µ–Ω–∏–µ –≤–∫–ª—é—á–µ–Ω–æ
    has_date: true
    has_time: true

  ten1_start_temp:                # –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –ø—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏ –¢–≠–ù1
    name: –¢–≠–ù1 —Å—Ç–∞—Ä—Ç —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞
    has_date: false
    has_time: true

  ten1_start_time:                # –í—Ä–µ–º—è –≤–∫–ª—é—á–µ–Ω–∏—è –¢–≠–ù1
    name: –¢–≠–ù1 —Å—Ç–∞—Ä—Ç –≤—Ä–µ–º—è
    has_date: true
    has_time: true


# ======================================================================
# 4. TEMPLATE SENSORS ‚Äì –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ (–¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞)
# ======================================================================
template:
  - sensor:
      - name: "–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –±—Ä—É–¥–µ—Ä–∞"
        unit_of_measurement: ¬∞C
        state: "{{ states('sensor.waveshare001_rs485_temperature_10') }}"

      - name: "–í–ª–∞–∂–Ω–æ—Å—Ç—å –±—Ä—É–¥–µ—Ä–∞"
        unit_of_measurement: '%'
        state: "{{ states('sensor.waveshare001_rs485_humidity_10') }}"

      - name: "–í—Å–µ –ò–ö –ª–∞–º–ø—ã –≤—ã–∫–ª—é—á–µ–Ω—ã"
        state: >
          {% if is_state('switch.waveshare001_relay_5', 'off') and
                is_state('switch.waveshare001_relay_6', 'off') and
                is_state('switch.waveshare001_relay_7', 'off') %}
            true
          {% else %}
            false
          {% endif %}


# ======================================================================
# 5. –£–¢–ò–õ–ò–¢–´ ‚Äì —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
# ======================================================================
# –ó–∞–º–µ–Ω–∏—Ç–µ "notify.mobile_app_your_phone" –Ω–∞ –≤–∞—à —Ä–µ–∞–ª—å–Ω—ã–π notifier
notify:
    platform: telegram
    chat_id: -4042989566
    name: brooder_notify

script:
  send_notify:
    sequence:
      - service: notify.brooder_notify
        data:
          message: >-
            –ë—Ä—É–¥–µ—Ä 1. {{ message }} –î–∞—Ç–∞ {{ now().strftime('%d.%m.%Y %H:%M') }}.
            T={{ states('sensor.waveshare001_rs485_temperature_10') }}¬∞C,
            H={{ states('sensor.waveshare001_rs485_humidity_10') }}%.

# ======================================================================
# SCRIPT: –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –±—Ä—É–¥–µ—Ä–∞ (–æ–±—â–∏–π)
# ======================================================================
  stop_brooder:
    sequence:
      - service: script.send_notify
        data:
          message: "–û—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω."
      - service: input_text.set_value
        data:
          entity_id: input_text.brooder_state
          value: –û–∂–∏–¥–∞–Ω–∏–µ
      - service: switch.turn_off
        target:
          entity_id:
            - switch.waveshare001_relay_8   # –û—Å–≤–µ—â–µ–Ω–∏–µ
            - switch.waveshare001_relay_5   # –ò–ö 1-2
            - switch.waveshare001_relay_6   # –ò–ö 3-4
            - switch.waveshare001_relay_7   # –ò–ö 5-6
            - switch.waveshare001_relay_1   # –¢–≠–ù1
            - switch.waveshare001_relay_2   # –¢–≠–ù2
            - switch.waveshare001_relay_3   # –í–µ–Ω—Ç.1
            - switch.waveshare001_relay_4   # –í–µ–Ω—Ç.2

# ======================================================================
# –°–ö–†–ò–ü–¢: –ü–æ–ª–Ω–∞—è –∞–≤–∞—Ä–∏–π–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞
# ======================================================================
  emergency_stop:
    sequence:
      # 1. –û—Ç–∫–ª—é—á–∞–µ–º –í–°–Å
      - service: switch.turn_off
        target:
          entity_id:
            - switch.waveshare001_relay_1   # –¢–≠–ù1
            - switch.waveshare001_relay_2   # –¢–≠–ù2
            - switch.waveshare001_relay_5   # –ò–ö 1-2
            - switch.waveshare001_relay_6   # –ò–ö 3-4
            - switch.waveshare001_relay_7   # –ò–ö 5-6
            - switch.waveshare001_relay_8   # –û—Å–≤–µ—â–µ–Ω–∏–µ
            - switch.waveshare001_relay_3   # –í–µ–Ω—Ç.1
            - switch.waveshare001_relay_4   # –í–µ–Ω—Ç.2

      # 2. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å—Ç–∞—Ç—É—Å
      - service: input_text.set_value
        data:
          entity_id: input_text.brooder_state
          value: –ê–í–ê–†–ò–Ø

      # 3. –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º —Ñ–ª–∞–≥ –∞–≤–∞—Ä–∏–∏
      - service: input_boolean.turn_on
        target:
          entity_id: input_boolean.emergency_active

      # 4. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Å –ø—Ä–∏—á–∏–Ω–æ–π (–ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é)
      - service: notify.brooder_notify
        data:
          message: >-
            üö® –ê–í–ê–†–ò–Ø! –ë—Ä—É–¥–µ—Ä –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω. –ü—Ä–∏—á–∏–Ω–∞: {{ reason }}
            T={{ states('sensor.waveshare001_rs485_temperature_10') }}¬∞C,
            H={{ states('sensor.waveshare001_rs485_humidity_10') }}%.
            –í—Ä–µ–º—è: {{ now().strftime('%d.%m.%Y %H:%M') }}

            
# ======================================================================
# 6. –ê–í–¢–û–ú–ê–¢–ò–ó–ê–¶–ò–ò
# ======================================================================
automation:

  # -------------------------------------------------
  # 1. –ö–ù–û–ü–ö–ê "–ü—Ä–æ–≥—Ä–µ–≤" ‚Üí –í–∫–ª—é—á–µ–Ω–∏–µ –ò–ö –ª–∞–º–ø –∏ –¢–≠–ù–æ–≤
  # -------------------------------------------------
  - alias: "[–ë—Ä—É–¥–µ—Ä] –ö–Ω–æ–ø–∫–∞ –ü—Ä–æ–≥—Ä–µ–≤ ‚Üí –í–∫–ª—é—á–µ–Ω–∏–µ –æ–±–æ–≥—Ä–µ–≤–∞"
    trigger:
      - platform: state
        entity_id: input_button.preheat
    condition:
      # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤–∞—Ä–∏–π–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞
      - condition: state
        entity_id: input_boolean.emergency_active
        state: "off"
    action:
      # 1.1 –û—Ç–∫–ª—é—á–∏—Ç—å –æ—Å–≤–µ—â–µ–Ω–∏–µ –∏ –≤–µ–Ω—Ç–∏–ª—è—Ç–æ—Ä—ã
      - service: switch.turn_off
        target:
          entity_id:
            - switch.waveshare001_relay_8   # –û—Å–≤–µ—â–µ–Ω–∏–µ
            - switch.waveshare001_relay_3   # –í–µ–Ω—Ç.—Å–∫–æ—Ä.1
            - switch.waveshare001_relay_4   # –í–µ–Ω—Ç.—Å–∫–æ—Ä.2
      
      # 1.2 –í–∫–ª—é—á–∏—Ç—å –≤—Å–µ –ò–ö –ª–∞–º–ø—ã
      - service: switch.turn_on
        target:
          entity_id:
            - switch.waveshare001_relay_5   # –ò–ö 1-2
            - switch.waveshare001_relay_6   # –ò–ö 3-4
            - switch.waveshare001_relay_7   # –ò–ö 5-6
      
      # 1.3 –í–∫–ª—é—á–∏—Ç—å –¢–≠–ù1 –∏ –¢–≠–ù2
      - service: switch.turn_on
        target:
          entity_id:
            - switch.waveshare001_relay_1   # –¢–≠–ù1
            - switch.waveshare001_relay_2   # –¢–≠–ù2
      
      # 1.4 –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ "–ü–æ–¥–æ–≥—Ä–µ–≤"
      - service: input_text.set_value
        data:
          entity_id: input_text.brooder_state
          value: –ü–æ–¥–æ–≥—Ä–µ–≤
      
      # 1.5 –ó–∞–ø–æ–º–Ω–∏—Ç—å –≤—Ä–µ–º—è –Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≥—Ä–µ–≤–∞
      - service: input_datetime.set_datetime
        data:
          entity_id: input_datetime.ten1_start_time
          timestamp: "{{ now().timestamp() | int }}"
      - service: input_datetime.set_datetime
        data:
          entity_id: input_datetime.ten1_start_temp
          timestamp: "{{ states('sensor.waveshare001_rs485_temperature_10')|float }}"
      
      # 1.6 –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
      - service: script.send_notify
        data:
          message: "–ü—Ä–æ–≥—Ä–µ–≤ –∑–∞–ø—É—â–µ–Ω. –í–∫–ª—é—á–µ–Ω—ã –≤—Å–µ –ò–ö –ª–∞–º–ø—ã –∏ –¢–≠–ù—ã. –¢–µ–∫—É—â–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ {{ states('sensor.waveshare001_rs485_temperature_10') }}¬∞C, —Ü–µ–ª—å {{ states('input_number.min_temp') }}¬∞C."

  # -------------------------------------------------
  # 1.2 –ü—Ä–æ–≤–µ—Ç—Ä–∏–≤–∞–Ω–∏–µ (–ø—Ä–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –ü—Ä–æ–≤–µ—Ç—Ä–∏–≤–∞–Ω–∏–µ)
  # -------------------------------------------------
  - alias: "[–ë—Ä—É–¥–µ—Ä] –ü—Ä–æ–≤–µ—Ç—Ä–∏–≤–∞–Ω–∏–µ"
    trigger:
      - platform: state
        entity_id: input_text.brooder_state
        to: "–ü—Ä–æ–≤–µ—Ç—Ä–∏–≤–∞–Ω–∏–µ"
      - platform: numeric_state
        entity_id: sensor.waveshare001_rs485_humidity_10
        above: input_number.min_hum
    condition:
      - condition: state
        entity_id: input_text.brooder_state
        state: "–ü—Ä–æ–≤–µ—Ç—Ä–∏–≤–∞–Ω–∏–µ"
    action:
      - choose:
          # –ï—Å–ª–∏ –≤–ª–∞–∂–Ω–æ—Å—Ç—å > min ‚Üí –≤–∫–ª—é—á–∞–µ–º –≤–µ–Ω—Ç–∏–ª—è—Ç–æ—Ä
          - conditions:
              - condition: numeric_state
                entity_id: sensor.waveshare001_rs485_humidity_10
                above: input_number.min_hum
            sequence:
              - service: switch.turn_on
                target:
                  entity_id: switch.waveshare001_relay_3   # –í–µ–Ω—Ç.—Å–∫–æ—Ä.1
              - service: script.send_notify
                data:
                  message: "–ü—Ä–æ–≤–µ—Ç—Ä–∏–≤–∞–Ω–∏–µ: –≤–ª–∞–∂–Ω–æ—Å—Ç—å > {{ states('input_number.min_hum') }}%, –≤–µ–Ω—Ç–∏–ª—è—Ç–æ—Ä –≤–∫–ª—é—á—ë–Ω."
          # –ö–æ–≥–¥–∞ –≤–ª–∞–∂–Ω–æ—Å—Ç—å < min ‚Üí 15 –º–∏–Ω —Ç–∞–π–º–µ—Ä
          - conditions:
              - condition: numeric_state
                entity_id: sensor.waveshare001_rs485_humidity_10
                below: input_number.min_hum
            sequence:
              - service: switch.turn_on
                target:
                  entity_id: switch.waveshare001_relay_3
              - delay: "00:15:00"
              - service: switch.turn_off
                target:
                  entity_id: switch.waveshare001_relay_3
              - service: input_text.set_value
                data:
                  entity_id: input_text.brooder_state
                  value: –ü–æ–¥–æ–≥—Ä–µ–≤
              - service: script.send_notify
                data:
                  message: "–ü—Ä–æ–≤–µ—Ç—Ä–∏–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ, –ø–µ—Ä–µ—Ö–æ–¥–∏–º –∫ –ø–æ–¥–æ–≥—Ä–µ–≤—É."

  # -------------------------------------------------
  # 1.3 –ü–æ–¥–æ–≥—Ä–µ–≤ (–¢–≠–ù—ã + –ò–ö)
  # -------------------------------------------------
  - alias: "[–ë—Ä—É–¥–µ—Ä] –ü–æ–¥–æ–≥—Ä–µ–≤ ‚Äì –¢–≠–ù1"
    trigger:
      - platform: state
        entity_id: input_text.brooder_state
        to: "–ü–æ–¥–æ–≥—Ä–µ–≤"
    condition:
      - condition: template
        value_template: "{{ states('sensor.waveshare001_rs485_temperature_10')|float < states('input_number.min_temp')|float }}"
    action:
      - service: switch.turn_on
        target:
          entity_id: switch.waveshare001_relay_1   # –¢–≠–ù1
      - service: input_datetime.set_datetime
        data:
          entity_id: input_datetime.ten1_start_time
          timestamp: "{{ now().timestamp() | int }}"
      - service: input_datetime.set_datetime
        data:
          entity_id: input_datetime.ten1_start_temp
          timestamp: "{{ states('sensor.waveshare001_rs485_temperature_10')|float }}"
      - service: script.send_notify
        data:
          message: "–¢–≠–ù1 –≤–∫–ª—é—á—ë–Ω. –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ {{ states('sensor.waveshare001_rs485_temperature_10') }}¬∞C."

  - alias: "[–ë—Ä—É–¥–µ—Ä] –ü–æ–¥–æ–≥—Ä–µ–≤ ‚Äì –∫–æ–Ω—Ç—Ä–æ–ª—å –¢–≠–ù1 ‚Üí –¢–≠–ù2"
    trigger:
      - platform: time_pattern
        minutes: "/5"   # –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω
    condition:
      - condition: state
        entity_id: switch.waveshare001_relay_1
        state: "on"
      - condition: template
        value_template: >-
          {{ (as_timestamp(now()) - as_timestamp(states.input_datetime.ten1_start_time.state)) / 60 > 60 }}
      - condition: template
        value_template: >-
          {{ (states('sensor.waveshare001_rs485_temperature_10')|float -
              states.input_datetime.ten1_start_temp.state|float) < 1 }}
    action:
      - service: switch.turn_on
        target:
          entity_id: switch.waveshare001_relay_2   # –¢–≠–ù2
      - delay: "01:00:00"
      - service: script.send_notify
        data:
          message: "–¢–≠–ù2 –≤–∫–ª—é—á—ë–Ω (—Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –Ω–µ –≤—ã—Ä–æ—Å–ª–∞ –∑–∞ 60 –º–∏–Ω)."

  - alias: "[–ë—Ä—É–¥–µ—Ä] –ü–æ–¥–æ–≥—Ä–µ–≤ ‚Äì –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ min_temp ‚Üí –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –æ–±–æ–≥—Ä–µ–≤–∞"
    trigger:
      - platform: numeric_state
        entity_id: sensor.waveshare001_rs485_temperature_10
        above: input_number.min_temp
    condition:
      - condition: state
        entity_id: input_text.brooder_state
        state: "–ü–æ–¥–æ–≥—Ä–µ–≤"
    action:
      # –û—Ç–∫–ª—é—á–∞–µ–º –¢–≠–ù—ã –∏ –ò–ö –ª–∞–º–ø—ã –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –∑–∞–¥–∞–Ω–Ω–æ–π —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã
      - service: switch.turn_off
        target:
          entity_id:
            - switch.waveshare001_relay_1   # –¢–≠–ù1
            - switch.waveshare001_relay_2   # –¢–≠–ù2
            - switch.waveshare001_relay_5   # –ò–ö 1-2
            - switch.waveshare001_relay_6   # –ò–ö 3-4
            - switch.waveshare001_relay_7   # –ò–ö 5-6
      - service: script.send_notify
        data:
          message: "–ü—Ä–æ–≥—Ä–µ–≤ –∑–∞–≤–µ—Ä—à—ë–Ω. –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –¥–æ—Å—Ç–∏–≥–ª–∞ {{ states('input_number.min_temp') }}¬∞C. –¢–≠–ù—ã –∏ –ò–ö –ª–∞–º–ø—ã –æ—Ç–∫–ª—é—á–µ–Ω—ã."

  - alias: "[–ë—Ä—É–¥–µ—Ä] –ò–ö ‚Äì –ø–ª–∞–Ω–æ–≤–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ 5-6"
    trigger:
      - platform: time
        at: "{{ states('input_datetime.ir_off_56') }}"
    action:
      - service: switch.turn_off
        target:
          entity_id: switch.waveshare001_relay_7
      - service: script.send_notify
        data:
          message: "–ò–ö –ª–∞–º–ø—ã 5-6 –≤—ã–∫–ª—é—á–µ–Ω—ã (–ø–ª–∞–Ω)."

  - alias: "[–ë—Ä—É–¥–µ—Ä] –ò–ö ‚Äì –ø–ª–∞–Ω–æ–≤–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ 3-4"
    trigger:
      - platform: time
        at: "{{ states('input_datetime.ir_off_34') }}"
    action:
      - service: switch.turn_off
        target:
          entity_id: switch.waveshare001_relay_6
      - service: script.send_notify
        data:
          message: "–ò–ö –ª–∞–º–ø—ã 3-4 –≤—ã–∫–ª—é—á–µ–Ω—ã (–ø–ª–∞–Ω)."

  - alias: "[–ë—Ä—É–¥–µ—Ä] –ò–ö ‚Äì –ø–ª–∞–Ω–æ–≤–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ 1-2"
    trigger:
      - platform: time
        at: "{{ states('input_datetime.ir_off_12') }}"
    action:
      - service: switch.turn_off
        target:
          entity_id: switch.waveshare001_relay_5
      - service: script.send_notify
        data:
          message: "–ò–ö –ª–∞–º–ø—ã 1-2 –≤—ã–∫–ª—é—á–µ–Ω—ã (–ø–ª–∞–Ω)."

  # -------------------------------------------------
  # 1.4 –û—Å–≤–µ—â–µ–Ω–∏–µ (–ø—Ä–∏ –≤—ã–∫–ª—é—á–µ–Ω–∏–∏ –≤—Å–µ—Ö –ò–ö)
  # -------------------------------------------------
  - alias: "[–ë—Ä—É–¥–µ—Ä] –û—Å–≤–µ—â–µ–Ω–∏–µ ‚Äì –≤–∫–ª—é—á–∏—Ç—å –ø—Ä–∏ –≤—Å–µ—Ö –ò–ö off"
    trigger:
      - platform: state
        entity_id: sensor.all_ir_off
        to: "true"
    condition:
      - condition: not
        conditions:
          - condition: state
            entity_id: input_text.brooder_state
            state: "–û–∂–∏–¥–∞–Ω–∏–µ"
    action:
      - service: input_text.set_value
        data:
          entity_id: input_text.brooder_state
          value: –û—Å–≤–µ—â–µ–Ω–∏–µ
      - service: switch.turn_on
        target:
          entity_id: switch.waveshare001_relay_8
      - service: input_datetime.set_datetime
        data:
          entity_id: input_datetime.lighting_start
          timestamp: "{{ now().timestamp() | int }}"
      - service: script.send_notify
        data:
          message: "–û—Å–≤–µ—â–µ–Ω–∏–µ –≤–∫–ª—é—á–µ–Ω–æ (–≤—Å–µ –ò–ö –≤—ã–∫–ª—é—á–µ–Ω—ã)."

  # -------------------------------------------------
  # 1.5 –ö–æ–Ω—Ç—Ä–æ–ª—å –≤–ª–∞–∂–Ω–æ—Å—Ç–∏ (–ø–æ—Å—Ç–æ—è–Ω–Ω–æ, –∫—Ä–æ–º–µ –û–∂–∏–¥–∞–Ω–∏–µ)
  # -------------------------------------------------
  - alias: "[–ë—Ä—É–¥–µ—Ä] –í–ª–∞–∂–Ω–æ—Å—Ç—å ‚Äì > max"
    trigger:
      - platform: numeric_state
        entity_id: sensor.waveshare001_rs485_humidity_10
        above: input_number.max_hum
    condition:
      - condition: not
        conditions:
          - condition: state
            entity_id: input_text.brooder_state
            state: "–û–∂–∏–¥–∞–Ω–∏–µ"
    action:
      - service: switch.turn_on
        target:
          entity_id: switch.waveshare001_relay_3   # –í–µ–Ω—Ç.—Å–∫–æ—Ä.1

  - alias: "[–ë—Ä—É–¥–µ—Ä] –í–ª–∞–∂–Ω–æ—Å—Ç—å ‚Äì < min –ò–õ–ò —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ < min"
    trigger:
      - platform: numeric_state
        entity_id: sensor.waveshare001_rs485_humidity_10
        below: input_number.min_hum
      - platform: numeric_state
        entity_id: sensor.waveshare001_rs485_temperature_10
        below: input_number.min_temp
    condition:
      - condition: not
        conditions:
          - condition: state
            entity_id: input_text.brooder_state
            state: "–û–∂–∏–¥–∞–Ω–∏–µ"
    action:
      - service: switch.turn_on
        target:
          entity_id:
            - switch.waveshare001_relay_3   # –í–µ–Ω—Ç.—Å–∫–æ—Ä.1
            - switch.waveshare001_relay_4   # –í–µ–Ω—Ç.—Å–∫–æ—Ä.2

  - alias: "[–ë—Ä—É–¥–µ—Ä] –ü–æ—á–∞—Å–æ–≤–æ–µ –ø—Ä–æ–≤–µ—Ç—Ä–∏–≤–∞–Ω–∏–µ (—Å–∫–æ—Ä.2, 15 –º–∏–Ω)"
    trigger:
      - platform: time_pattern
        minutes: "0"
    condition:
      - condition: not
        conditions:
          - condition: state
            entity_id: input_text.brooder_state
            state: "–û–∂–∏–¥–∞–Ω–∏–µ"
    action:
      - service: switch.turn_on
        target:
          entity_id: switch.waveshare001_relay_4
      - delay: "00:15:00"
      - service: switch.turn_off
        target:
          entity_id: switch.waveshare001_relay_4

  # -------------------------------------------------
  # 1.6 –û—Å—Ç–∞–Ω–æ–≤–∫–∞ (—Ä–∞–±–æ—á–∏–π —Ü–∏–∫–ª –∏–ª–∏ –∫–Ω–æ–ø–∫–∞)
  # -------------------------------------------------
  - alias: "[–ë—Ä—É–¥–µ—Ä] –û—Å—Ç–∞–Ω–æ–≤–∫–∞ ‚Äì —Ä–∞–±–æ—á–∏–π —Ü–∏–∫–ª"
    trigger:
      - platform: time_pattern
        minutes: "/10"
    condition:
      - condition: template
        value_template: >-
          {{ (as_timestamp(now()) - as_timestamp(states.input_datetime.init_time.state)) / 86400
             > states('input_number.work_cycle')|int }}
      - condition: not
        conditions:
          - condition: state
            entity_id: input_text.brooder_state
            state: "–û–∂–∏–¥–∞–Ω–∏–µ"
    action:
      - service: script.stop_brooder

  - alias: "[–ë—Ä—É–¥–µ—Ä] –û—Å—Ç–∞–Ω–æ–≤–∫–∞ ‚Äì –∫–Ω–æ–ø–∫–∞ –°—Ç–æ–ø"
    trigger:
      - platform: state
        entity_id: input_button.stop_brooder
    action:
      - service: script.stop_brooder

  - alias: "[–ë—Ä—É–¥–µ—Ä] –ú–µ—Ö–∞–Ω–∏—á–µ—Å–∫–∞—è –∫–Ω–æ–ø–∫–∞ –°—Ç–æ–ø (DI8)"
    trigger:
      - platform: state
        entity_id: binary_sensor.waveshare001_di8
        to: "on"
    action:
      - service: script.stop_brooder

  - alias: "[–ë—Ä—É–¥–µ—Ä] –ú–µ—Ö–∞–Ω–∏—á–µ—Å–∫–∞—è –∫–Ω–æ–ø–∫–∞ –°—Ç–∞—Ä—Ç (DI7) ‚Üí –ó–∞–ø—É—Å—Ç–∏—Ç—å"
    trigger:
      - platform: state
        entity_id: binary_sensor.waveshare001_di7
        to: "on"
    action:
      - service: input_button.press
        target:
          entity_id: input_button.start_brooder

  - alias: "[–ë—Ä—É–¥–µ—Ä] –ö–Ω–æ–ø–∫–∞ –ó–∞–ø—É—Å—Ç–∏—Ç—å ‚Üí –ü—Ä–æ–≥—Ä–µ–≤"
    trigger:
      - platform: state
        entity_id: input_button.start_brooder
    action:
      - service: input_button.press
        target:
          entity_id: input_button.preheat

# ======================================================================
# –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ: –ì—Ä–∞—Ñ–∏–∫ –æ—Å–≤–µ—â–µ–Ω–∏—è (–ø–æ –ø—É–Ω–∫—Ç—É 1.5)
# ======================================================================
# –†–µ–∞–ª–∏–∑—É–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω—ã–º —Å–∫—Ä–∏–ø—Ç–æ–º/–∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–µ–π, –µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è
# 24 —á —Å–≤–µ—Ç ‚Üí 22 —á ‚Üí 20 —á ‚Üí 18 —á ‚Üí 16 —á
# –ü—Ä–∏–º–µ—Ä (–º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤ UI –∫–∞–∫ schedule):

  - alias: "[–ë—Ä—É–¥–µ—Ä] –ì—Ä–∞—Ñ–∏–∫ –æ—Å–≤–µ—â–µ–Ω–∏—è ‚Äì –µ–∂–µ–¥–Ω–µ–≤–Ω–æ"
    trigger:
      - platform: time_pattern
        hours: "/24"
    condition:
      - condition: state
        entity_id: input_text.brooder_state
        state: "–û—Å–≤–µ—â–µ–Ω–∏–µ"
    action:
      - variables:
          day: >-
            {{ ((as_timestamp(now()) - as_timestamp(states.input_datetime.lighting_start.state)) / 86400) | int }}
          on_hours: >-
            {{ [24,22,20,18,16][ (day//2) if day < 10 else 4 ] }}
      - service: switch.turn_on
        target:
          entity_id: switch.waveshare001_relay_8
      - delay: "{{ '%02d:00:00'|format(on_hours) }}"
      - service: switch.turn_off
        target:
          entity_id: switch.waveshare001_relay_8


# ======================================================================
# –ê–í–¢–û–ú–ê–¢–ò–ó–ê–¶–ò–ò: –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –∞–≤–∞—Ä–∏–π
# ======================================================================
  # -------------------------------------------------
  # 1. –ü–µ—Ä–µ–≥—Ä–µ–≤: T > max_temp + 3¬∞C
  # -------------------------------------------------
  - alias: "[–ë—Ä—É–¥–µ—Ä] –ê–≤–∞—Ä–∏—è ‚Äì –ü–µ—Ä–µ–≥—Ä–µ–≤"
    trigger:
      - platform: numeric_state
        entity_id: sensor.waveshare001_rs485_temperature_10
        above: "{{ states('input_number.max_temp')|float + 3 }}"
    condition:
      - condition: state
        entity_id: input_boolean.emergency_active
        state: "off"
    action:
      - service: script.emergency_stop
        data:
          reason: "–ü–µ—Ä–µ–≥—Ä–µ–≤ (T > {{ states('input_number.max_temp')|float + 3 }}¬∞C)"

  # -------------------------------------------------
  # 2. –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –≤–ª–∞–∂–Ω–æ—Å—Ç—å: H > max_hum + 10%
  # -------------------------------------------------
  - alias: "[–ë—Ä—É–¥–µ—Ä] –ê–≤–∞—Ä–∏—è ‚Äì –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –≤–ª–∞–∂–Ω–æ—Å—Ç—å"
    trigger:
      - platform: numeric_state
        entity_id: sensor.waveshare001_rs485_humidity_10
        above: "{{ states('input_number.max_hum')|int + 10 }}"
    condition:
      - condition: state
        entity: input_boolean.emergency_active
        state: "off"
    action:
      - service: script.emergency_stop
        data:
          reason: "–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –≤–ª–∞–∂–Ω–æ—Å—Ç—å (H > {{ states('input_number.max_hum')|int + 10 }}%)"

  # -------------------------------------------------
  # 3. –î–∞—Ç—á–∏–∫–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã > 5 –º–∏–Ω—É—Ç
  # -------------------------------------------------
  - alias: "[–ë—Ä—É–¥–µ—Ä] –ê–≤–∞—Ä–∏—è ‚Äì –î–∞—Ç—á–∏–∫–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã"
    trigger:
      - platform: state
        entity_id: 
          - sensor.waveshare001_rs485_temperature_10
          - sensor.waveshare001_rs485_humidity_10
        to: "unavailable"
        for: "00:05:00"
    condition:
      - condition: state
        entity_id: input_boolean.emergency_active
        state: "off"
    action:
      - service: script.emergency_stop
        data:
          reason: "–î–∞—Ç—á–∏–∫–∏ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã/–≤–ª–∞–∂–Ω–æ—Å—Ç–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã >5 –º–∏–Ω"

  # -------------------------------------------------
  # 4. –ê–≤–∞—Ä–∏–π–Ω–∞—è –∫–Ω–æ–ø–∫–∞ (DI8) ‚Üí –∞–≤–∞—Ä–∏–π–Ω—ã–π —Å—Ç–æ–ø
  # -------------------------------------------------
  - alias: "[–ë—Ä—É–¥–µ—Ä] –ê–≤–∞—Ä–∏—è ‚Äì –ö–Ω–æ–ø–∫–∞ DI8"
    trigger:
      - platform: state
        entity_id: binary_sensor.waveshare001_di8
        to: "on"
    condition:
      - condition: state
        entity_id: input_boolean.emergency_active
        state: "off"
    action:
      - service: script.emergency_stop
        data:
          reason: "–ù–∞–∂–∞—Ç–∞ –∞–≤–∞—Ä–∏–π–Ω–∞—è –∫–Ω–æ–ø–∫–∞ (DI8)"


# ======================================================================
# –°–ë–†–û–° –ê–í–ê–†–ò–ò (—Ä—É—á–Ω–æ–π)
# ======================================================================
  - alias: "[–ë—Ä—É–¥–µ—Ä] –°–±—Ä–æ—Å –∞–≤–∞—Ä–∏–∏"
    trigger:
      - platform: state
        entity_id: input_button.reset_emergency
    condition:
      - condition: state
        entity_id: input_boolean.emergency_active
        state: "on"
    action:
      - service: input_boolean.turn_off
        target:
          entity_id: input_boolean.emergency_active
      - service: input_text.set_value
        data:
          entity_id: input_text.brooder_state
          value: –û–∂–∏–¥–∞–Ω–∏–µ
      - service: notify.brooder_notify
        data:
          message: >-
            ‚úÖ –ê–≤–∞—Ä–∏–π–Ω—ã–π —Ä–µ–∂–∏–º —Å–±—Ä–æ—à–µ–Ω. –ë—Ä—É–¥–µ—Ä –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ "–û–∂–∏–¥–∞–Ω–∏–µ".
            –ú–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å —Ü–∏–∫–ª.

# ======================================================================
# –ë–õ–û–ö–ò–†–û–í–ö–ê –ó–ê–ü–£–°–ö–ê –ü–†–ò –ê–í–ê–†–ò–ò
# ======================================================================
# –î–æ–±–∞–≤–ª—è–µ–º —É—Å–ª–æ–≤–∏–µ –≤–æ –í–°–ï –∫–Ω–æ–ø–∫–∏ –∑–∞–ø—É—Å–∫–∞:
  - alias: "[–ë—Ä—É–¥–µ—Ä] –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏ –∞–≤–∞—Ä–∏–∏ ‚Äì –ü—Ä–æ–≥—Ä–µ–≤"
    trigger:
      - platform: state
        entity_id: input_button.preheat
    condition:
      - condition: state
        entity_id: input_boolean.emergency_active
        state: "on"
    action:
      - service: notify.brooder_notify
        data:
          message: >-
            ‚ö†Ô∏è –ó–∞–ø—É—Å–∫ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω: –∞–∫—Ç–∏–≤–µ–Ω –∞–≤–∞—Ä–∏–π–Ω—ã–π —Ä–µ–∂–∏–º.
            –ù–∞–∂–º–∏—Ç–µ "–°–±—Ä–æ—Å –∞–≤–∞—Ä–∏–∏" –ø–æ—Å–ª–µ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã.

  - alias: "[–ë—Ä—É–¥–µ—Ä] –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏ –∞–≤–∞—Ä–∏–∏ ‚Äì –ó–∞–ø—É—Å—Ç–∏—Ç—å"
    trigger:
      - platform: state
        entity_id: input_button.start_brooder
    condition:
      - condition: state
        entity_id: input_boolean.emergency_active
        state: "on"
    action:
      - service: notify.brooder_notify
        data:
          message: >-
            ‚ö†Ô∏è –ó–∞–ø—É—Å–∫ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω: –∞–∫—Ç–∏–≤–µ–Ω –∞–≤–∞—Ä–∏–π–Ω—ã–π —Ä–µ–∂–∏–º.

  - alias: "[–ë—Ä—É–¥–µ—Ä] –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –º–µ—Ö–∞–Ω–∏—á–µ—Å–∫–æ–π –∫–Ω–æ–ø–∫–∏ DI7 –ø—Ä–∏ –∞–≤–∞—Ä–∏–∏"
    trigger:
      - platform: state
        entity_id: binary_sensor.waveshare001_di7
        to: "on"
    condition:
      - condition: state
        entity_id: input_boolean.emergency_active
        state: "on"
    action:
      - service: notify.brooder_notify
        data:
          message: >-
            ‚ö†Ô∏è –ú–µ—Ö–∞–Ω–∏—á–µ—Å–∫–∞—è –∫–Ω–æ–ø–∫–∞ —Å—Ç–∞—Ä—Ç–∞ (DI7) –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞: –∞–≤–∞—Ä–∏–π–Ω—ã–π —Ä–µ–∂–∏–º –∞–∫—Ç–∏–≤–µ–Ω.          

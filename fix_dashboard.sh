#!/bin/bash

# Финальный скрипт для исправления dashboard
# Скопируйте и выполните команды из этого скрипта в веб-терминале Home Assistant

cat << 'EOF'
# ======================================================================
# КОМАНДЫ ДЛЯ ВЫПОЛНЕНИЯ В ВЕБ-ТЕРМИНАЛЕ HOME ASSISTANT
# ======================================================================

# 1. Перейдите в директорию конфигурации
cd /config

# 2. Синхронизируйте файлы из GitHub
git pull origin main

# 3. Проверьте, что кнопка есть в файле
grep -A 3 "Перезагрузка контроллера" brooder_dahsboard,yaml

# 4. Перезагрузите Home Assistant Core
ha core restart

# ИЛИ перезагрузите через веб-интерфейс:
# Настройки → Система → Перезагрузка → Перезагрузить Home Assistant

# 5. После перезагрузки обновите страницу в браузере:
# Нажмите Ctrl+F5 (Windows/Linux) или Cmd+Shift+R (Mac)

# ======================================================================
# ЕСЛИ КНОПКА ВСЕ ЕЩЕ НЕ ПОЯВЛЯЕТСЯ:
# ======================================================================
# 
# Dashboard может быть настроен через UI, а не через YAML файл.
# В этом случае:
#
# 1. Откройте "Брудер" в меню
# 2. Нажмите три точки (меню) → "Редактировать панель"
# 3. Найдите секцию с кнопками управления
# 4. Удалите старую карточку с кнопками (если есть)
# 5. Добавьте новую карточку типа "Grid" с 3 колонками
# 6. Добавьте все 6 элементов:
#    - Прогрев (input_button.preheat)
#    - Запустить (input_button.start_brooder)
#    - Стоп (input_button.stop_brooder)
#    - Сброс аварии (input_button.reset_emergency)
#    - Ручной режим (input_boolean.ruchnoi_rezhim)
#    - Перезагрузка контроллера (service: esphome.restart, target: esphome.waveshare001)
#
# ======================================================================

EOF

echo ""
echo "✅ Скопируйте команды выше и выполните их в веб-терминале Home Assistant"
echo ""


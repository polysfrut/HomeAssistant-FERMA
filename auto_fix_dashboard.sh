#!/bin/bash
# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —ç—Ç–æ—Ç —Ñ–∞–π–ª –≤ Home Assistant –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
# bash auto_fix_dashboard.sh

echo "üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ dashboard..."
echo ""

cd /config

echo "üì• –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤ –∏–∑ GitHub..."
git pull origin main

echo ""
echo "‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–π–ª–∞ dashboard..."
if grep -q "–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞" brooder_dahsboard,yaml; then
    echo "‚úÖ –ö–Ω–æ–ø–∫–∞ '–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞' –Ω–∞–π–¥–µ–Ω–∞ –≤ —Ñ–∞–π–ª–µ"
else
    echo "‚ùå –ö–Ω–æ–ø–∫–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞!"
    exit 1
fi

echo ""
echo "üîÑ –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ Home Assistant..."
ha core restart

echo ""
echo "‚ú® –ì–æ—Ç–æ–≤–æ! Dashboard –æ–±–Ω–æ–≤–ª–µ–Ω."
echo "üìã –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤ –±—Ä–∞—É–∑–µ—Ä–µ (Ctrl+F5 –∏–ª–∏ Cmd+Shift+R)"

